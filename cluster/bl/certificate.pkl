import "../../Settings.pkl" as Settings

apiVersion = "cert-manager.io/v1"
kind = "Certificate"
metadata {
  name = "bl-cert"
}
spec {
  secretName = "bl-cert"
  duration = "2160h"
  renewBefore = "360h"
  commonName = Settings.ingress["bl"].domain
  dnsNames {
     Settings.ingress["bl"].domain
     "www." + Settings.ingress["bl"].domain
  }
  issuerRef {
    when (Settings.ingress["bl"].tls.selfSigned)
    {
        name = "selfsigned-issuer"
    }
    else
    {
        name = "letsencrypt-issuer"
    }
    kind = "ClusterIssuer"
  }
}
